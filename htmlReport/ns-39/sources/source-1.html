


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > DotGraph</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.iguana.utils.visualization</a>
</div>

<h1>Coverage Summary for Class: DotGraph (org.iguana.utils.visualization)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">DotGraph</td>
<td class="coverageStat">
  <span class="percent">
    91.7%
  </span>
  <span class="absValue">
    (11/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    69.4%
  </span>
  <span class="absValue">
    (25/36)
  </span>
</td>
</tr>
  <tr>
    <td class="name">DotGraph$Color</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (4/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DotGraph$Direction</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DotGraph$Edge</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (4/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (8/12)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DotGraph$Node</td>
<td class="coverageStat">
  <span class="percent">
    63.6%
  </span>
  <span class="absValue">
    (7/11)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    70.6%
  </span>
  <span class="absValue">
    (24/34)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DotGraph$Shape</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    81.1%
  </span>
  <span class="absValue">
    (30/37)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    74.2%
  </span>
  <span class="absValue">
    (72/97)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.iguana.utils.visualization;
&nbsp;
&nbsp;import java.io.BufferedOutputStream;
&nbsp;import java.io.BufferedReader;
&nbsp;import java.io.InputStreamReader;
&nbsp;import java.io.OutputStream;
&nbsp;import java.io.PrintWriter;
&nbsp;
&nbsp;public class DotGraph {
&nbsp;
<b class="fc">&nbsp;    private static final Node nodeInstance = new Node();</b>
<b class="fc">&nbsp;    private static final Edge edgeInstance = new Edge();</b>
&nbsp;
<b class="fc">&nbsp;    private final StringBuilder sb = new StringBuilder();</b>
&nbsp;
&nbsp;    public DotGraph() {
<b class="fc">&nbsp;        this(Direction.TO_DOWN);</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public DotGraph(Direction direction) {</b>
<b class="fc">&nbsp;        sb.append(&quot;digraph sppf {&quot;).append(&quot;\n&quot;);</b>
<b class="fc">&nbsp;        sb.append(&quot;layout=dot&quot;).append(&quot;\n&quot;);</b>
<b class="fc">&nbsp;        sb.append(&quot;nodesep=.6&quot;).append(&quot;\n&quot;);</b>
<b class="fc">&nbsp;        sb.append(&quot;ranksep=.4&quot;).append(&quot;\n&quot;);</b>
<b class="fc">&nbsp;        sb.append(&quot;ordering=out&quot;).append(&quot;\n&quot;);</b>
<b class="fc">&nbsp;        sb.append(&quot;forcelabels=true&quot;).append(&quot;\n&quot;);</b>
<b class="fc">&nbsp;        if (direction == Direction.LEFT_TO_RIGHT)</b>
<b class="fc">&nbsp;            sb.append(&quot;rankdir=LR&quot;).append(&quot;\n&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Node newNode(int id) {
<b class="fc">&nbsp;        return newNode(id, &quot;&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Node newNode(int id, String label) {
<b class="fc">&nbsp;        return nodeInstance.init(id, label);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Edge newEdge(int sourceId, int targetId) {
<b class="fc">&nbsp;        return edgeInstance.init(sourceId, targetId);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Edge newEdge(int sourceId, int targetId, String label) {
<b class="fc">&nbsp;        return edgeInstance.init(sourceId, targetId).setLabel(label);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void addNode(Node node) {
<b class="fc">&nbsp;        sb.append(node.toString());</b>
&nbsp;    }
&nbsp;
&nbsp;    public void addEdge(Edge edge) {
<b class="fc">&nbsp;        sb.append(edge.toString());</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getText() {
<b class="nc">&nbsp;        return sb.toString() + &quot;}&quot;;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void generate(String fileName) throws Exception {
<b class="fc">&nbsp;        Process process = new ProcessBuilder(&quot;dot&quot;, &quot;-Tpdf&quot;, &quot;-o&quot;, fileName).start();</b>
<b class="nc">&nbsp;        OutputStream stdin = process.getOutputStream();</b>
<b class="nc">&nbsp;        try (PrintWriter out = new PrintWriter(new BufferedOutputStream(stdin))) {</b>
<b class="nc">&nbsp;            out.write(getText());</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        int exitCode = process.waitFor();</b>
&nbsp;
<b class="nc">&nbsp;        BufferedReader errorStream = new BufferedReader(new InputStreamReader(process.getErrorStream()));</b>
&nbsp;
&nbsp;        String line;
<b class="nc">&nbsp;        while ((line = errorStream.readLine()) != null) {</b>
<b class="nc">&nbsp;            System.out.println(line);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (exitCode != 0)</b>
<b class="nc">&nbsp;            throw new RuntimeException(&quot;&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    private static String escape(String s) {
<b class="fc">&nbsp;        return s.replace(&quot;\\&quot;, &quot;\\\\&quot;)</b>
<b class="fc">&nbsp;                .replace(&quot;\t&quot;, &quot;\\\\t&quot;)</b>
<b class="fc">&nbsp;                .replace(&quot;\n&quot;, &quot;\\\\n&quot;)</b>
<b class="fc">&nbsp;                .replace(&quot;\r&quot;, &quot;\\\\r&quot;)</b>
<b class="fc">&nbsp;                .replace(&quot;\&quot;&quot;, &quot;\\\&quot;&quot;);</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public enum Direction {</b>
<b class="fc">&nbsp;        TO_DOWN,</b>
<b class="fc">&nbsp;        LEFT_TO_RIGHT</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public enum Shape {</b>
<b class="fc">&nbsp;        ROUNDED_RECTANGLE,</b>
<b class="fc">&nbsp;        RECTANGLE,</b>
<b class="fc">&nbsp;        CIRCLE,</b>
<b class="fc">&nbsp;        DOUBLE_CIRCLE,</b>
<b class="fc">&nbsp;        DIAMOND</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public enum Color {</b>
<b class="fc">&nbsp;        BLACK(&quot;black&quot;),</b>
<b class="fc">&nbsp;        RED(&quot;red&quot;);</b>
&nbsp;
&nbsp;        private final String color;
&nbsp;
<b class="fc">&nbsp;        Color(String color) {</b>
<b class="fc">&nbsp;            this.color = color;</b>
&nbsp;        }
&nbsp;
&nbsp;        @Override
&nbsp;        public String toString() {
<b class="fc">&nbsp;            return color;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public static class Node {</b>
&nbsp;
&nbsp;        private int id;
&nbsp;        private String label;
&nbsp;        private Shape shape;
&nbsp;        private Color color;
&nbsp;        private Color fontColor;
&nbsp;        private int fontSize;
&nbsp;        private double width;
&nbsp;        private double height;
&nbsp;
&nbsp;        private Node init(int id, String label) {
<b class="fc">&nbsp;            this.id = id;</b>
<b class="fc">&nbsp;            this.label = label;</b>
<b class="fc">&nbsp;            this.shape = Shape.ROUNDED_RECTANGLE;</b>
<b class="fc">&nbsp;            this.color = Color.BLACK;</b>
<b class="fc">&nbsp;            this.fontColor = Color.BLACK;</b>
<b class="fc">&nbsp;            this.fontSize = 10;</b>
<b class="fc">&nbsp;            this.width = 0.1;</b>
<b class="fc">&nbsp;            this.height = 0.1;</b>
<b class="fc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Node setLabel(String label) {
<b class="fc">&nbsp;            this.label = label;</b>
<b class="fc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Node setShape(Shape shape) {
<b class="fc">&nbsp;            this.shape = shape;</b>
<b class="fc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Node setFontColor(Color fontColor) {
<b class="nc">&nbsp;            this.fontColor = fontColor;</b>
<b class="nc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Node setFontSize(int fontSize) {
<b class="nc">&nbsp;            this.fontSize = fontSize;</b>
<b class="nc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Node setWidth(int width) {
<b class="nc">&nbsp;            this.width = width;</b>
<b class="nc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Node setHeight(int height) {
<b class="nc">&nbsp;            this.height = height;</b>
<b class="nc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Node setColor(Color color) {
<b class="fc">&nbsp;            this.color = color;</b>
<b class="fc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public String toString() {
<b class="fc">&nbsp;            return id + &quot; &quot; + &quot;[&quot;</b>
<b class="fc">&nbsp;                   + shapeToString(shape) + &quot;, &quot;</b>
&nbsp;                   + &quot;width = &quot; + width + &quot;, &quot;
&nbsp;                   + &quot;height = &quot; + height + &quot;, &quot;
&nbsp;                   + &quot;color = &quot; + color + &quot;, &quot;
&nbsp;                   + &quot;fontcolor = &quot; + fontColor + &quot;, &quot;
<b class="fc">&nbsp;                   + &quot;label = \&quot;&quot; + escape(label) + &quot;\&quot;&quot; + &quot;, &quot;</b>
&nbsp;                   + &quot;fontsize = &quot; + fontSize
&nbsp;                   + &quot;]\n&quot;;
&nbsp;        }
&nbsp;
&nbsp;        private static String shapeToString(Shape shape) {
<b class="fc">&nbsp;            switch (shape) {</b>
<b class="fc">&nbsp;                case RECTANGLE:         return &quot;shape = \&quot;box\&quot;&quot;;</b>
<b class="fc">&nbsp;                case ROUNDED_RECTANGLE: return &quot;shape = \&quot;box\&quot; style=rounded&quot;;</b>
<b class="fc">&nbsp;                case CIRCLE:            return &quot;shape = \&quot;circle\&quot;&quot;;</b>
<b class="fc">&nbsp;                case DOUBLE_CIRCLE:     return &quot;shape = \&quot;doublecircle\&quot;&quot;;</b>
<b class="nc">&nbsp;                case DIAMOND:           return &quot;shape = \&quot;diamond\&quot;&quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new RuntimeException(&quot;Unknown shape&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public static class Edge {</b>
&nbsp;
&nbsp;        private int sourceId;
&nbsp;        private int targetId;
&nbsp;        private String label;
&nbsp;
&nbsp;        private Edge init(int sourceId, int targetId) {
<b class="fc">&nbsp;            this.sourceId = sourceId;</b>
<b class="fc">&nbsp;            this.targetId = targetId;</b>
<b class="fc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Edge setSourceId(int sourceId) {
<b class="nc">&nbsp;            this.sourceId = sourceId;</b>
<b class="nc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Edge setTargetId(int targetId) {
<b class="nc">&nbsp;            this.targetId = targetId;</b>
<b class="nc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        public Edge setLabel(String label) {
<b class="fc">&nbsp;            this.label = label;</b>
<b class="fc">&nbsp;            return this;</b>
&nbsp;        }
&nbsp;
&nbsp;        @Override
&nbsp;        public String toString() {
<b class="fc">&nbsp;            return sourceId + &quot;-&gt;&quot; + targetId + &quot; &quot;</b>
&nbsp;                   + &quot;[&quot;
&nbsp;                   + &quot;color = black, &quot;
&nbsp;                   + &quot;style = solid, &quot;
&nbsp;                   + &quot;penwidth = 0.5, &quot;
&nbsp;                   + &quot;arrowsize = 0.7, &quot; + &quot;&quot;
<b class="fc">&nbsp;                   + &quot;label = \&quot;&quot; + (label == null ? &quot;&quot; : label) + &quot;\&quot;&quot;</b>
&nbsp;                   + &quot;];\n&quot;;
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-03-03 17:08</div>
</div>
</body>
</html>
