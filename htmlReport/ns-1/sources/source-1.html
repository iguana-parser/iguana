


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > Iguana</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.iguana</a>
</div>

<h1>Coverage Summary for Class: Iguana (org.iguana)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Iguana</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/32)
  </span>
</td>
</tr>
  <tr>
    <td class="name">Iguana$Command</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/33)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.iguana;
&nbsp;
&nbsp;import org.iguana.generator.ide.GenerateLangFiles;
&nbsp;import org.iguana.generator.ide.GenerateParserFiles;
&nbsp;import org.iguana.generator.ide.GeneratePsiElements;
&nbsp;import org.iguana.generator.parser.ParseTreeVisitorGenerator;
&nbsp;import org.iguana.generator.parser.ParserGenerator;
&nbsp;import org.iguana.grammar.Grammar;
&nbsp;import org.iguana.iggy.IggyParserUtils;
&nbsp;import org.iguana.util.serialization.JsonSerializer;
&nbsp;import picocli.CommandLine;
&nbsp;import picocli.CommandLine.ArgGroup;
&nbsp;import picocli.CommandLine.Command;
&nbsp;import picocli.CommandLine.Option;
&nbsp;
&nbsp;import java.io.File;
&nbsp;import java.nio.file.Files;
&nbsp;import java.nio.file.Path;
&nbsp;import java.util.concurrent.Callable;
&nbsp;
&nbsp;@Command(name = &quot;iguana&quot;, mixinStandardHelpOptions = true, version = &quot;0.1-SNAPSHOT&quot;,
&nbsp;    description = &quot;Iguana: General Data-dependent Parser&quot;, sortOptions = false)
<b class="nc">&nbsp;public class Iguana implements Callable&lt;Integer&gt; {</b>
&nbsp;
&nbsp;    @ArgGroup(exclusive = true, multiplicity = &quot;1&quot;)
&nbsp;    Command command;
&nbsp;
<b class="nc">&nbsp;    static class Command {</b>
&nbsp;        @Option(names = &quot;--generate-grammar&quot;) boolean generateGrammar;
&nbsp;        @Option(names = &quot;--generate-types&quot;) boolean generateTypes;
&nbsp;        @Option(names = &quot;--generate-ide&quot;) boolean generateIDE;
&nbsp;    }
&nbsp;
&nbsp;    @Option(names = {&quot;--name&quot;, &quot;-n&quot;}, description = &quot;The grammar name&quot;, defaultValue = &quot;grammar&quot;)
&nbsp;    private String grammarName;
&nbsp;
&nbsp;    @Option(names = {&quot;--grammar&quot;, &quot;-g&quot;}, description = &quot;The grammar file&quot;, required = true)
&nbsp;    private File grammarFile;
&nbsp;
&nbsp;    @Option(names = {&quot;--output&quot;, &quot;-o&quot;}, description = &quot;The output project for generated files&quot;, required = true)
&nbsp;    private Path outputDirectory;
&nbsp;
&nbsp;    @Option(names = &quot;--package&quot;, description = &quot;package name for the generated code&quot;)
&nbsp;    private String packageName;
&nbsp;
&nbsp;    @Option(names = {&quot;--grammar-output&quot;}, description = &quot;The location where the grammar.json file will be generated.&quot;,
&nbsp;        required = true)
&nbsp;    private Path grammarOutputDirectory;
&nbsp;
&nbsp;    public static void main(String[] args) {
<b class="nc">&nbsp;        int exitCode = new CommandLine(new Iguana()).execute(args);</b>
<b class="nc">&nbsp;        System.exit(exitCode);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public Integer call() throws Exception {
&nbsp;        // Create the gen directory if it doesn&#39;t already exist
<b class="nc">&nbsp;        Files.createDirectories(outputDirectory.toAbsolutePath());</b>
&nbsp;
<b class="nc">&nbsp;        Grammar grammar = IggyParserUtils.fromIggyGrammarPath(grammarFile.getAbsolutePath());</b>
&nbsp;
<b class="nc">&nbsp;        if (command.generateGrammar || command.generateTypes) {</b>
<b class="nc">&nbsp;            String jsonPath = grammarOutputDirectory.resolve(grammarName + &quot;.json&quot;).toAbsolutePath().toString();</b>
<b class="nc">&nbsp;            JsonSerializer.serialize(grammar, jsonPath);</b>
<b class="nc">&nbsp;            System.out.println(&quot;grammar.json file has been generated in &quot; + jsonPath);</b>
<b class="nc">&nbsp;            Path typesOutputDirectory = outputDirectory.resolve(packageName.replace(&quot;.&quot;, &quot;/&quot;));</b>
<b class="nc">&nbsp;            ParserGenerator parserGenerator = new ParserGenerator(grammarName, packageName,</b>
<b class="nc">&nbsp;                typesOutputDirectory.toAbsolutePath().toString());</b>
<b class="nc">&nbsp;            parserGenerator.generateGrammar();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (command.generateTypes) {</b>
<b class="nc">&nbsp;            Path typesOutputDirectory = outputDirectory.resolve(packageName.replace(&quot;.&quot;, &quot;/&quot;));</b>
<b class="nc">&nbsp;            ParserGenerator parserGenerator = new ParserGenerator(grammarName, packageName,</b>
<b class="nc">&nbsp;                typesOutputDirectory.toAbsolutePath().toString());</b>
<b class="nc">&nbsp;            parserGenerator.generateParser();</b>
<b class="nc">&nbsp;            ParseTreeVisitorGenerator generator = new ParseTreeVisitorGenerator(grammar.toRuntimeGrammar(), grammarName,</b>
<b class="nc">&nbsp;                packageName, typesOutputDirectory.toAbsolutePath().toString());</b>
<b class="nc">&nbsp;            generator.generate();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (command.generateIDE) {</b>
<b class="nc">&nbsp;            GenerateLangFiles generateLangFiles = new GenerateLangFiles(grammarName,</b>
<b class="nc">&nbsp;                outputDirectory.toAbsolutePath().toString());</b>
<b class="nc">&nbsp;            generateLangFiles.generate();</b>
<b class="nc">&nbsp;            GeneratePsiElements generatePSIElements = new GeneratePsiElements(grammar.toRuntimeGrammar(), grammarName,</b>
<b class="nc">&nbsp;                packageName, outputDirectory.toAbsolutePath().toString());</b>
<b class="nc">&nbsp;            generatePSIElements.generate();</b>
<b class="nc">&nbsp;            GenerateParserFiles generateParserFiles = new GenerateParserFiles(grammar.toRuntimeGrammar(), grammarName,</b>
<b class="nc">&nbsp;                packageName, outputDirectory.toAbsolutePath().toString());</b>
<b class="nc">&nbsp;            generateParserFiles.generate();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-03-03 17:08</div>
</div>
</body>
</html>
